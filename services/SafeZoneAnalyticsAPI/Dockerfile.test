FROM safezone_analytics_api:latest

# ===== the following lines are added for test =====
COPY services/SafeZoneAnalyticsAPI/requirements.test.txt .
# Install test dependencies specified in requirements.test.txt
RUN pip install --no-cache-dir -r requirements.test.txt --root-user-action=ignore

# copy .env file
COPY services/SafeZoneAnalyticsAPI/test/tests /test
COPY services/SafeZoneAnalyticsAPI/.env.example /app/.env
# copy test data and pregenerated db
COPY services/SafeZoneAnalyticsAPI/test/data /data
COPY services/SafeZoneAnalyticsAPI/test/db /db


